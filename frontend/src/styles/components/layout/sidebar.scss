.app-sidebar {
	grid-area: sidebar;
	position: relative;
	background: var(--bg-card);
	border-right: 1px solid var(--border-primary);
	width: 240px;
	transition: width var(--transition-fast);
	--sidebar-width: 240px; /* feeds grid in app-main */

	&.collapsed {
		width: 72px;
		--sidebar-width: 72px;

		.nav-item {
			justify-content: center;
		}
		.label {
			opacity: 0;
			width: 0;
			overflow: hidden;
		}

		.cluster-mini {
			padding: 10px;
			width: 40px;
			justify-content: center;

			.info {
				display: none;
			}
		}
	}

	.collapse {
		position: absolute;
		top: 8px;
		right: -11px;
		width: 24px;
		height: 24px;
		border-radius: 999px;
		border: 1px solid var(--border-primary);
		background: var(--bg-muted);
		color: var(--text-secondary);
		cursor: pointer;
		display: grid;
		place-items: center;
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12);
		transition:
			transform var(--transition-fast),
			background var(--transition-fast),
			color var(--transition-fast);

		&:hover {
			background: var(--bg-header);
			color: var(--text-primary);
		}
		&:active {
			transform: translateX(1px);
		}
		svg {
			display: block;
		}
	}

	nav {
		margin-top: 48px;
		display: flex;
		flex-direction: column;
		gap: 6px;
		padding: 0 8px;

		.nav-item {
			display: flex;
			align-items: center;
			gap: 10px;
			padding: 10px;
			border-radius: var(--border-radius);
			color: var(--text-secondary);
			text-decoration: none;
			transition:
				background var(--transition-fast),
				color var(--transition-fast);

			.icon {
				width: 18px;
				height: 18px;
			}

			.label {
				white-space: nowrap;
			}

			&:hover {
				background: var(--bg-muted);
				color: var(--text-primary);
			}

			&.active {
				background: color-mix(in srgb, var(--accent-primary) 14%, transparent);
				color: var(--accent-primary);
			}
		}
	}

	.foot {
		position: absolute;
		left: 8px;
		right: 8px;
		bottom: 8px;

		.cluster-mini {
			display: inline-flex;
			align-items: center;
			gap: 8px;
			padding: 8px 10px;
			background: var(--bg-muted);
			border: 1px solid var(--border-primary);
			border-radius: var(--border-radius);
			color: var(--text-secondary);
			font-size: 12px;
			transition:
				background var(--transition-fast),
				color var(--transition-fast),
				width var(--transition-fast),
				padding var(--transition-fast);

			.dot {
				width: 8px;
				height: 8px;
				border-radius: 50%;
				background: var(--text-secondary);

				&.online {
					background: var(--accent-primary);
					box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-primary) 15%, transparent);
				}
			}
			.info .muted {
				color: var(--text-secondary);
			}
		}
	}
}
